<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="utf-8" />
      <title>Epicollect5</title>

      <base href="/" />

      <meta
            name="color-scheme"
            media="(prefers-color-scheme: light)"
            content="light"
      />
      <meta
            name="viewport"
            content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
      />
      <meta
            name="format-detection"
            content="telephone=no"
      />
      <meta
            name="msapplication-tap-highlight"
            content="no"
      />

      <link
            rel="shortcut icon"
            type="image/png"
            href="<%= BASE_URL %>assets/icon/favicon.png"
      />

      <!-- add to homescreen for ios -->
      <meta
            name="apple-mobile-web-app-capable"
            content="yes"
      />
      <meta
            name="apple-mobile-web-app-title"
            content="Ionic App"
      />
      <meta
            name="apple-mobile-web-app-status-bar-style"
            content="black"
      />

      <script src="<%= BASE_URL %>assets/js/randexp.min.js"></script>
      <script src="<%= BASE_URL %>assets/js/jwt-decode.js"></script>

      <link
            href="<%= BASE_URL %>assets/css/Control.FullScreen.css"
            rel="stylesheet"
      />


      <script>
            function _onLeafletLoaded() {
                  console.log('Leaflet loaded');
                  //add full screen plugin for leaflet AFTER leaflet is loaded
                  const leafletFullScreenJS = document.createElement('script');
                  leafletFullScreenJS.setAttribute('src', '<%= BASE_URL %>assets/js/Control.FullScreen.js');
                  document.head.appendChild(leafletFullScreenJS);
            }
            //On PWA debugging, load dependencies from CDN
            if ('<%= VUE_APP_MODE %>' === 'PWA' && '<%= NODE_ENV %>' === 'development') {

                  const leafletCSS = document.createElement('link');
                  leafletCSS.setAttribute('href', 'https://unpkg.com/leaflet@1.9.2/dist/leaflet.css');
                  leafletCSS.setAttribute('integrity', 'sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=');
                  leafletCSS.setAttribute('crossorigin', '');
                  leafletCSS.setAttribute('rel', 'stylesheet');
                  document.head.appendChild(leafletCSS);

                  const leafletJS = document.createElement('script');
                  leafletJS.setAttribute('src', 'https://unpkg.com/leaflet@1.9.2/dist/leaflet.js');
                  leafletJS.setAttribute('integrity', 'sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=');
                  leafletJS.setAttribute('crossorigin', '');
                  leafletJS.setAttribute('defer', '');
                  leafletJS.setAttribute('onload', '_onLeafletLoaded()')
                  document.head.appendChild(leafletJS);
            }
      </script>
</head>

<body>
      <div id="app"></div>

</html>